from crewai import Agent, Task
from crewai.llm import LLM
from dotenv import load_dotenv
import os

load_dotenv()

tracker_agent = Agent(
    role="ูุชุงุจุน ุฎุทุฉ ุงูุชุบุฐูุฉ",
    goal="ุชูููู ูุฏู ุงูุชุฒุงู ุงููุณุชุฎุฏู ุจุงูุฎุทุฉ ุงูุบุฐุงุฆูุฉ ุงูููููุฉ ุจุดูู ุฑููู ููุท ุจุฏูู ุชูุฏูู ุชูุตูุงุช ุฅุถุงููุฉ ุฃู ูุตุงุฆุญ.",
    backstory="ุฎุจูุฑ ุชุญููู ุชุบุฐูุฉ ูููู ุจููุงุฑูุฉ ุงูุฎุทุฉ ุงูุบุฐุงุฆูุฉ ุงูููุชุฑุญุฉ ุจูุง ุชูุงููู ุงููุณุชุฎุฏู ูุนูููุง ูุญุณุงุจ ูุณุจุฉ ุงูุงูุชุฒุงู ููุท.",
    verbose=True,
    allow_delegation=False,
    llm=LLM(
        model="gemini/gemini-2.0-flash",
        api_key=os.getenv("GEMINI_API_KEY"),
        temperature=0
    )
)

track_progress_task = Task(
    description=(
        "ูุงุฑู ุจูู ุงูุฎุทุฉ ุงูุบุฐุงุฆูุฉ ุงูููุชุฑุญุฉ ูููุณุชุฎุฏู (ุชุดูู ุงููุฌุจุงุช ูุงูููููุงุช ููุท) "
        "ููุง ุชู ุชูุงููู ูุนูููุง ุฎูุงู ุงูููู. ุงุญุณุจ ูุณุจุฉ ุงูุงูุชุฒุงู ููุณุจุฉ ูุฆููุฉ ุฏูููุฉ (ูุซูุงู: 80%).\n"
        "- ูุง ุชูุฏู ุฃู ุชูุตูุงุช ุฃู ูุตุงุฆุญ ุฃู ุชุญููุฒ.\n"
        "- ุฃุฎุฑุฌ ุงููุณุจุฉ ูู ุณุทุฑ ูุงุญุฏ ููุทุ ูุชุจูุนูุง ุจุฅูููุฌู ูุนูุณ ูุณุชูู ุงูุงูุชุฒุงู:\n"
        "  ๐ข๐ฅ ุฅุฐุง ูุงูุช ุงููุณุจุฉ 85% ุฃู ุฃูุซุฑ\n"
        "  ๐ก๐ ุฅุฐุง ูุงูุช ุจูู 70% ู84%\n"
        "  ๐โ๏ธ ุฅุฐุง ูุงูุช ุจูู 50% ู69%\n"
        "  ๐ดโ ุฅุฐุง ูุงูุช ุฃูู ูู 50%\n\n"
        "ุงูุฎุทุฉ ุงูุบุฐุงุฆูุฉ ุงูููุชุฑุญุฉ:\n"
        "{{planned_meal}}\n\n"
        "ูุง ุชู ุชูุงููู ูุนูููุง:\n"
        "{{eaten_meal}}\n\n"
        "ุงูุนูุงูู ุงูุฎุงุฑุฌูุฉ:\n"
        "{{external_factors}}"
    ),
    expected_output="ุณุทุฑ ูุงุญุฏ ููุท ูุญุชูู ุนูู ุงููุณุจุฉ ุงููุฆููุฉ + ุงูุฅูููุฌู ุงูููุงุณุจ ุจุฏูู ุดุฑุญ ุฃู ุชุนููู.",
    agent=tracker_agent,
    inputs=["planned_meal", "eaten_meal", "external_factors"]
)
